<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="././resources/script/wangEditor.js"></script>
    <script type="text/javascript" src="././resources/script/jquery-1.7.2.js"></script>

</head>
<body>
<div id="editor">
    <p>欢迎使用 <b>wangEditor</b> 富文本编辑器</p>
</div>
<div id="picUrl"></div>
<input type="button" value="获取图片url" id="btn">

<input type="button" value="获得文本内容" id="btn2">
<script type="text/javascript">
    var E = window.wangEditor;
    var editor = new E('#editor');
    // 或者 var editor = new E( document.getElementById('#editor') )
    editor.customConfig.uploadImgServer = 'http://localhost:8080/maven2-ssm/comment/addPic.action';
    editor.customConfig.showLinkImg = false
    editor.customConfig.uploadImgMaxLength = 1
    editor.customConfig.uploadImgHooks = {

        success: function (xhr, editor, result) {
            if($('#imgUrl').length<=0) { //判断是不是不存在在该节点
                $('#picUrl').append('<input type="hidden" value="' + result.data[0] + '" id="imgUrl">')
            }else{
                var oldUrls = $('#imgUrl').val();
                $('#imgUrl').replaceWith('<input type="hidden" value="'+ oldUrls+','+ result.data[0] + '" id="imgUrl">')
            //这里会拼成 pic1.jpg,pic2.jpg的形式，拼成一个字符串，便于后台存储
            }
        }

    }

    editor.create();



    $('#btn').click(function(){
        alert($('#imgUrl').val())

    })
    $('#btn2').click(function () {
        $.ajax({
            url: "http://localhost:8080/maven2-ssm/comment/editorTest.action",
            type: "post",
            contentType: 'application/json;charset=UTF-8',
            data: '{"biaoqing":"' + editor.txt.text() + '"}',
            dataType: 'json',
            success: function (data) {
             alert("321")
               alert(data.biaoqing)
                alert(data.biaoqing=="")

    }

        })
    })
</script>
</body>
</html>